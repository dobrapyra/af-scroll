{"mappings":"AAKO,SAASA,EAAKC,EAAKC,GACxB,MAAMC,EAAIF,EAAIG,OACd,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAGE,IAAK,CAC1B,MAAMC,EAASJ,EAAGD,EAAII,GAAIA,EAAGJ,GAC7B,IAAe,IAAXK,IACW,IAAXA,EAAkB,KACxB,CACF,CASO,SAASC,EAAKC,EAAOC,EAAKC,GAC/B,OAAOF,GAAUC,EAAMD,GAASE,CAClC,CAOO,SAASC,EAAMC,EAAIC,GACxBC,OAAOC,KAAKF,GAAQG,SAAQC,IAC1BL,EAAGM,MAAMD,GAAYJ,EAAOI,EAAS,GAEzC,CCpBe,SAAAE,GACbC,YAAaC,EAAiB,GAC9BC,YAAaC,EAAiB,GAC9BC,SAAUC,EAAc,KACxBC,UAAWC,EAAe,WAC1BC,YAAaC,EAAiB,eAC9BC,WAAYC,EAAgB,GAC5BC,SAAUC,EAAc,SACxBC,WAAYC,EAAgB,UAC1B,CAAC,GACH,MAAMC,EAAe,EAAIf,EACnBC,EAAcC,EACdc,EAAiBZ,EACjBC,EAAYC,EACZC,EAAcC,EACdC,EAAaC,EACbC,EAAWC,EACXC,EAAaC,EAEnB,IAAIG,EAAe,EACfC,EAAa,EACbC,EAAe,KACfC,EAAe,KACfC,EAAY,KACZC,EAAY,KAEhB,MAAMC,EAASC,SAASC,qBAAqB,QAAQ,GACrD,IAAItB,EAAW,KACXuB,EAAkB,EAClBC,EAAa,KAwEjB,SAASC,EAASC,EAAQC,GAAQ,GAC5BA,IAAOX,EAAeU,GAE1BL,SAASO,KAAKC,UAAYR,SAASS,gBAAgBD,UAAYH,CACjE,CAMA,SAASK,IACPf,EAAe,IACjB,CAkBA,SAASgB,EAAaN,GACpBX,EAAaW,EACb1B,EAAS6B,UAAYH,EACrBlB,EAASkB,EACX,CAEA,SAASO,IACP,GAAqB,OAAjBhB,EAAJ,CAEA,GAAIiB,KAAKC,IAAIrB,EAAeC,GAAcjB,EAIxC,OAHAkC,EAAalB,GACbiB,SACArB,EAAWI,GAIbkB,EAAajD,EAAKgC,EAAYD,EAAcF,IAE5CM,EAAYkB,sBAAsBH,EAXP,CAY7B,CAEA,SAASI,IACc,OAAjBpB,EAAuBQ,EAASR,GACV,OAAjBD,GAAuBS,EAAST,GAEzCF,EAAewB,OAAOC,QAEtBC,qBAAqBtB,GACrBA,EAAYkB,sBAAsBH,EACpC,CAMA,SAASQ,MACDlB,GAAmBjB,IACvBiB,EAAkB,EAClBmB,KAGFvB,EAAYiB,sBAAsBK,EACpC,CAYA,SAASC,IACP,MAAMC,EAAe3C,EAAS2C,aAC1BA,IAAiBnB,IAErBA,EAAamB,EACbxD,EAAMiC,EAAQ,CACZwB,OAAQ,GAAGD,QAEf,CAEA,SAASE,IACPH,IACAA,GACF,CAgBA,SAASI,IACU,OAAb9C,IAEJc,EAAewB,OAAOC,QAvLxB,WAaE,GAZAvC,EAA8B,OAAnBa,EACPA,EACAQ,SAAS0B,cAAc,OAC3B5D,EAAMa,EAAU,CACdgD,SAAU,QACVC,IAAK,EACLC,KAAM,EACNC,MAAO,OACPP,OAAQ,OACRQ,SAAU,WAGW,OAAnBvC,EAAyB,OAE7Bb,EAASqD,aAAa,QAASnD,GAE/B,MAAMoD,EAAc,GACpB9E,EAAK4C,EAAOmC,UAAUC,IACpB,GAAIA,IAAYxD,GAAYwD,EAAQC,QAAQrD,GAAc,OAAO,EACjEkD,EAAYI,KAAKF,EAAA,IAEnBhF,EAAK8E,GAAaE,IAChBxD,EAAS2D,YAAYH,EAAA,IAEvBpC,EAAOwC,aAAa5D,EAAUoB,EAAOmC,SAAS,GAChD,CA8JEM,GACAhB,IAEApB,EAASX,GACTkB,EAAalB,GArBbwB,OAAOwB,iBAAiB,SAAUzB,GAClCC,OAAOwB,iBAAiB,SAAUjB,GA1Bf,IAAfvC,IAAmC,IAAfA,IAExBa,EAAYiB,sBAAsBK,IAgDpC,CAoBA,OAFAK,IAEO,CACLA,OACArB,WACAM,OACAgC,KAnIF,WACE9C,EAAeF,CACjB,EAkIEiD,OA5HF,WACE/C,EAAe,IACjB,EA2HEgD,QApBF,WACmB,OAAbjE,IAtEJwC,qBAAqBtB,GAmBrBsB,qBAAqBrB,GAwBrBmB,OAAO4B,oBAAoB,SAAU7B,GACrCC,OAAO4B,oBAAoB,SAAUrB,GA9IvC,WAKE,GAJA1D,EAAMiC,EAAQ,CAAEwB,OAAQ,KACxBrB,EAAkB,EAClBC,EAAa,KAEU,OAAnBX,EAWF,OAVA1B,EAAMa,EAAU,CACdgD,SAAU,GACVC,IAAK,GACLC,KAAM,GACNC,MAAO,GACPP,OAAQ,GACRQ,SAAU,UAEZpD,EAAW,MAKb,MAAMsD,EAAc,GACpB9E,EAAKwB,EAASuD,UAAUC,IACtBF,EAAYI,KAAKF,EAAA,IAEnBhF,EAAK8E,GAAaE,IAChBpC,EAAOwC,aAAaJ,EAASxD,EAAA,IAE/BoB,EAAO+C,YAAYnE,GACnBA,EAAW,IACb,CAiJEoE,GAEApD,EAAe,KACfC,EAAe,KACjB,EAYF,EC1QC,WAEC,MAAMoD,EAAW1E,EAAe,CAC9BK,SAAUqB,SAASiD,cAAc,eAGnC,CACE,CAAEC,SAAU,oBAAqB7F,GAAI,KAAQ2F,EAAS5C,SAAS,KAC/D,CAAE8C,SAAU,0BAA2B7F,GAAI,KAAQ2F,EAAS5C,SAAS,GAAG,EAAI,GAC5E,CAAE8C,SAAU,iBAAkB7F,GAAI,KAAQ2F,EAASJ,SAAO,GAC1D,CAAEM,SAAU,gBAAiB7F,GAAI,KAAQ2F,EAASvB,MAAI,GACtD,CAAEyB,SAAU,cAAe7F,GAAI,KAAQ2F,EAASN,MAAI,GACpD,CAAEQ,SAAU,gBAAiB7F,GAAI,KAAQ2F,EAASL,QAAM,IACxDQ,KAAI,EAACD,SAAEA,EAAQ7F,GAAEA,MACF2C,SAASiD,cAAcC,GAC/BT,iBAAiB,QAASpF,EAAA,GAErC,CAjBC","sources":["dist/src/helpers.js","dist/src/index.js","src/docs/js/static.js"],"sourcesContent":["/**\n * lerp\n * @param {Array} arr array or other iterable collection\n * @param {Function} cb callback function for each array element\n */\nexport function each(arr, cb) {\n  const l = arr.length;\n  for (let i = 0; i < l; i++) {\n    const result = cb(arr[i], i, arr);\n    if (result === true) continue;\n    if (result === false) break;\n  }\n}\n\n/**\n * lerp\n * @param {Number} begin begin value\n * @param {Number} end end value\n * @param {Number} factor in range 0.0 - 1.0\n * @returns interpolated value\n */\nexport function lerp(begin, end, factor) {\n  return begin + ((end - begin) * factor);\n}\n\n/**\n * style\n * @param {Element} el\n * @param {Object} styles\n */\nexport function style(el, styles) {\n  Object.keys(styles).forEach(styleKey => {\n    el.style[styleKey] = styles[styleKey];\n  });\n}\n\nexport default {\n  each,\n  lerp,\n  style,\n};","import { each, lerp, style } from './helpers';\n\n/**\n * AFScroll (Animation Frame Scroll)\n * @param {Object} options general options\n * @property {Number} smoothForce smoothing force in range 0.0 - 1.0, 0: no smooth, 1: no scroll\n * @property {Number} smoothLimit min diff between current and target value to keep smooth loop\n * @property {Element} scrollEl static scroll wrapper element\n * @property {String} className css class name of scroll wrapper element\n * @property {String} wrapExclude css selector to exclude from wrapping\n * @property {Number} autoHeight height checking period in frames, 1: each frame, 0: disabled\n * @property {Function} onUpdate callback function triggered on scroll update\n * @property {Function} onComplete callback function triggered after smooth loop stopped\n */\nexport default function createAFScroll({\n  smoothForce: smoothForceArg = 0.8,\n  smoothLimit: smoothLimitArg = 0.2,\n  scrollEl: scrollElArg = null,\n  className: classNameArg = 'afScroll',\n  wrapExclude: wrapExcludeArg = 'script, link',\n  autoHeight: autoHeightArg = 12,\n  onUpdate: onUpdateArg = () => {},\n  onComplete: onCompleteArg = () => {}\n} = {}) {\n  const smoothFactor = 1 - smoothForceArg;\n  const smoothLimit = smoothLimitArg;\n  const staticScrollEl = scrollElArg;\n  const className = classNameArg;\n  const wrapExclude = wrapExcludeArg;\n  const autoHeight = autoHeightArg;\n  const onUpdate = onUpdateArg;\n  const onComplete = onCompleteArg;\n\n  let targetScroll = 0;\n  let lastScroll = 0;\n  let forcedScroll = null;\n  let lockedScroll = null;\n  let smoothRaf = null;\n  let heightRaf = null;\n\n  const bodyEl = document.getElementsByTagName('body')[0];\n  let scrollEl = null;\n  let autoHeightFrame = 0;\n  let lastHeight = null;\n\n  /**\n   * create scroll wrapper element\n   */\n  function createScroll() {\n    scrollEl = staticScrollEl !== null\n      ? staticScrollEl\n      : document.createElement('div');\n    style(scrollEl, {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n    });\n\n    if (staticScrollEl !== null) return;\n\n    scrollEl.setAttribute('class', className);\n\n    const childrenArr = [];\n    each(bodyEl.children, childEl => {\n      if (childEl === scrollEl || childEl.matches(wrapExclude)) return true;\n      childrenArr.push(childEl);\n    });\n    each(childrenArr, childEl => {\n      scrollEl.appendChild(childEl);\n    });\n    bodyEl.insertBefore(scrollEl, bodyEl.children[0]);\n  }\n\n  /**\n   * remove scroll wrapper element\n   */\n  function removeScroll() {\n    style(bodyEl, { height: '' });\n    autoHeightFrame = 0;\n    lastHeight = null;\n\n    if (staticScrollEl !== null) {\n      style(scrollEl, {\n        position: '',\n        top: '',\n        left: '',\n        width: '',\n        height: '',\n        overflow: '',\n      });\n      scrollEl = null;\n\n      return;\n    }\n\n    const childrenArr = [];\n    each(scrollEl.children, childEl => {\n      childrenArr.push(childEl);\n    });\n    each(childrenArr, childEl => {\n      bodyEl.insertBefore(childEl, scrollEl);\n    });\n    bodyEl.removeChild(scrollEl);\n    scrollEl = null;\n  }\n\n  /**\n   * scrollTo\n   * @public\n   * @param {Number} scroll scrollTop value\n   * @param {Boolean} force prevents user from changing a scroll target\n   */\n  function scrollTo(scroll, force = false) {\n    if (force) forcedScroll = scroll;\n\n    document.body.scrollTop = document.documentElement.scrollTop = scroll;\n  }\n\n  /**\n   * free forced scroll\n   * @public\n   */\n  function free() {\n    forcedScroll = null;\n  }\n\n  /**\n   * lock scroll\n   * @public\n   */\n  function lock() {\n    lockedScroll = lastScroll;\n  }\n\n  /**\n   * unlock scroll\n   * @public\n   */\n  function unlock() {\n    lockedScroll = null;\n  }\n\n  function updateScroll(scroll) {\n    lastScroll = scroll;\n    scrollEl.scrollTop = scroll;\n    onUpdate(scroll);\n  }\n\n  function smoothUpdate() {\n    if (lockedScroll !== null) return;\n\n    if (Math.abs(targetScroll - lastScroll) < smoothLimit) {\n      updateScroll(targetScroll);\n      free();\n      onComplete(targetScroll);\n      return;\n    }\n\n    updateScroll(lerp(lastScroll, targetScroll, smoothFactor));\n\n    smoothRaf = requestAnimationFrame(smoothUpdate);\n  }\n\n  function onScroll() {\n    if (lockedScroll !== null) scrollTo(lockedScroll);\n    else if (forcedScroll !== null) scrollTo(forcedScroll);\n\n    targetScroll = window.scrollY;\n\n    cancelAnimationFrame(smoothRaf);\n    smoothRaf = requestAnimationFrame(smoothUpdate);\n  }\n\n  function breakSmoothLoop() {\n    cancelAnimationFrame(smoothRaf);\n  }\n\n  function autoHeightUpdate() {\n    if (++autoHeightFrame >= autoHeight) {\n      autoHeightFrame = 0;\n      updateHeight();\n    }\n\n    heightRaf = requestAnimationFrame(autoHeightUpdate);\n  }\n\n  function startAutoHeight() {\n    if (autoHeight === 0 || autoHeight === false) return;\n\n    heightRaf = requestAnimationFrame(autoHeightUpdate);\n  }\n\n  function stopAutoHeight() {\n    cancelAnimationFrame(heightRaf);\n  }\n\n  function updateHeight() {\n    const scrollHeight = scrollEl.scrollHeight;\n    if (scrollHeight === lastHeight) return;\n\n    lastHeight = scrollHeight;\n    style(bodyEl, {\n      height: `${scrollHeight}px`,\n    });\n  }\n\n  function onResize() {\n    updateHeight();\n    updateHeight(); // double to fix some size issues\n  }\n\n  function bindEvents() {\n    window.addEventListener('scroll', onScroll);\n    window.addEventListener('resize', onResize);\n  }\n\n  function unbindEvents() {\n    window.removeEventListener('scroll', onScroll);\n    window.removeEventListener('resize', onResize);\n  }\n\n  /**\n   * initialize AFScroll\n   * @public\n   */\n  function init() {\n    if (scrollEl !== null) return;\n\n    targetScroll = window.scrollY;\n    createScroll();\n    onResize();\n\n    scrollTo(targetScroll);\n    updateScroll(targetScroll);\n\n    bindEvents();\n    startAutoHeight();\n  }\n\n  /**\n   * destroy AFScroll\n   * @public\n   */\n  function destroy() {\n    if (scrollEl === null) return;\n\n    breakSmoothLoop();\n    stopAutoHeight();\n    unbindEvents();\n    removeScroll();\n\n    forcedScroll = null;\n    lockedScroll = null;\n  }\n\n  init();\n\n  return {\n    init,\n    scrollTo,\n    free,\n    lock,\n    unlock,\n    destroy,\n  };\n}\n","import createAFScroll from '../../../dist/esmodule';\n\n(function(){\n  // AFScroll\n  const afScroll = createAFScroll({\n    scrollEl: document.querySelector('.afScroll'),\n  });\n\n  [\n    { selector: '[data-scroll-top]', cb: () => { afScroll.scrollTo(0); } },\n    { selector: '[data-scroll-top-force]', cb: () => { afScroll.scrollTo(0, true); } },\n    { selector: '[data-destroy]', cb: () => { afScroll.destroy(); } },\n    { selector: '[data-reinit]', cb: () => { afScroll.init(); } },\n    { selector: '[data-lock]', cb: () => { afScroll.lock(); } },\n    { selector: '[data-unlock]', cb: () => { afScroll.unlock(); } },\n  ].map(({ selector, cb }) => {\n    const button = document.querySelector(selector);\n    button.addEventListener('click', cb);\n  })\n})();"],"names":["$b48aee95bbc055ea$var$$927e8cf0f6fe9586$export$79b2f7037acddd43","arr","cb","l","length","i","result","$b48aee95bbc055ea$var$$927e8cf0f6fe9586$export$3a89f8d6f6bf6c9f","begin","end","factor","$b48aee95bbc055ea$var$$927e8cf0f6fe9586$export$1d567c320f4763bc","el","styles","Object","keys","forEach","styleKey","style","$b48aee95bbc055ea$export$2e2bcd8739ae039","smoothForce","smoothForceArg","smoothLimit","smoothLimitArg","scrollEl","scrollElArg","className","classNameArg","wrapExclude","wrapExcludeArg","autoHeight","autoHeightArg","onUpdate","onUpdateArg","onComplete","onCompleteArg","smoothFactor","staticScrollEl","targetScroll","lastScroll","forcedScroll","lockedScroll","smoothRaf","heightRaf","bodyEl","document","getElementsByTagName","autoHeightFrame","lastHeight","scrollTo","scroll","force","body","scrollTop","documentElement","free","updateScroll","smoothUpdate","Math","abs","requestAnimationFrame","onScroll","window","scrollY","cancelAnimationFrame","autoHeightUpdate","updateHeight","scrollHeight","height","onResize","init","createElement","position","top","left","width","overflow","setAttribute","childrenArr","children","childEl","matches","push","appendChild","insertBefore","createScroll","addEventListener","lock","unlock","destroy","removeEventListener","removeChild","removeScroll","afScroll","querySelector","selector","map"],"version":3,"file":"static.73087909.js.map"}