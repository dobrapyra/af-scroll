{"mappings":"ACKO,KAAK,CAAC,yCAAI,IAAI,GAAG,EAAE,EAAE,GAAK,CAAC;IAChC,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM;IACpB,GAAG,CAAE,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAI,CAAC;QAC3B,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG;QAChC,EAAE,EAAE,MAAM,KAAK,IAAI,EAAE,QAAQ;QAC7B,EAAE,EAAE,MAAM,KAAK,KAAK,EAAE,KAAK;IAC7B,CAAC;AACH,CAAC;AASM,KAAK,CAAC,yCAAI,IAAI,KAAK,EAAE,GAAG,EAAE,MAAM,GAAK,CAAC;IAC3C,MAAM,CAAC,KAAK,IAAK,GAAG,GAAG,KAAK,IAAI,MAAM;AACxC,CAAC;AAOM,KAAK,CAAC,yCAAK,IAAI,EAAE,EAAE,MAAM,GAAK,CAAC;IACpC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,EAAC,QAAQ,GAAI,CAAC;QACvC,EAAE,CAAC,KAAK,CAAC,QAAQ,IAAI,MAAM,CAAC,QAAQ;IACtC,CAAC;AACH,CAAC;IAED,wCAIE,GAJa,CAAC;UACd,yCAAI;UACJ,yCAAI;WACJ,yCAAK;AACP,CAAC;;;;gBD3Ba,CAAC,cACX,WAAW,GAAG,GAAG,gBACjB,WAAW,GAAG,GAAG,cACjB,SAAS,GAAG,CAAU,yBACtB,WAAW,GAAG,CAAc,0BAC5B,QAAQ,OAAS,CAAC;IAAA,CAAC,eACnB,UAAU,OAAS,CAAC;IAAA,CAAC,EACvB,CAAC,GAAG,CAAC;IAAA,CAAC,CAAE,CAAC;QACP,IAAI,CAAC,YAAY,GAAG,CAAC,GAAG,WAAW;QACnC,IAAI,CAAC,WAAW,GAAG,WAAW;QAC9B,IAAI,CAAC,SAAS,GAAG,SAAS;QAC1B,IAAI,CAAC,WAAW,GAAG,WAAW;QAC9B,IAAI,CAAC,QAAQ,GAAG,QAAQ;QACxB,IAAI,CAAC,UAAU,GAAG,UAAU;QAE5B,IAAI,CAAC,YAAY,GAAG,CAAC;QACrB,IAAI,CAAC,UAAU,GAAG,CAAC;QAEnB,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,oBAAoB,CAAC,CAAM,OAAE,CAAC;QACrD,IAAI,CAAC,QAAQ,GAAG,IAAI;QAEpB,IAAI,CAAC,QAAQ;QACb,IAAI,CAAC,IAAI;IACX,CAAC;IAED,EAGG,AAHH;;;GAGG,AAHH,EAGG,CACH,IAAI,GAAG,CAAC;QACN,EAAE,EAAE,IAAI,CAAC,QAAQ,KAAK,IAAI,EAAE,MAAM;QAElC,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,OAAO;QAClC,IAAI,CAAC,YAAY;QACjB,IAAI,CAAC,UAAU;QAEf,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY;QAC/B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY;QAEnC,IAAI,CAAC,UAAU;IACjB,CAAC;IAED,EAEG,AAFH;;GAEG,AAFH,EAEG,CACH,YAAY,GAAG,CAAC;QACd,KAAK,CAAC,CAAC,SAAC,MAAM,cAAE,SAAS,gBAAE,WAAW,EAAC,CAAC,GAAG,IAAI;QAE/C,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAK;QAC7C,QAAQ,CAAC,YAAY,CAAC,CAAO,QAAE,SAAS;QACxC,yCAAK,CAAC,QAAQ,EAAE,CAAC;YACf,QAAQ,EAAE,CAAO;YACjB,GAAG,EAAE,CAAC;YACN,IAAI,EAAE,CAAC;YACP,KAAK,EAAE,CAAM;YACb,MAAM,EAAE,CAAM;YACd,QAAQ,EAAE,CAAQ;QACpB,CAAC;QAED,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC;QACtB,yCAAI,CAAC,MAAM,CAAC,QAAQ,GAAE,OAAO,GAAI,CAAC;YAChC,EAAE,EAAE,OAAO,KAAK,QAAQ,IAAI,OAAO,CAAC,OAAO,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI;YACrE,WAAW,CAAC,IAAI,CAAC,OAAO;QAC1B,CAAC;QACD,yCAAI,CAAC,WAAW,GAAE,OAAO,GAAI,CAAC;YAC5B,QAAQ,CAAC,WAAW,CAAC,OAAO;QAC9B,CAAC;QACD,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;QAE/C,IAAI,CAAC,QAAQ,GAAG,QAAQ;IAC1B,CAAC;IAED,QAAQ,GAAG,CAAC;QACV,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI;QAC5C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI;QAC5C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI;IACrD,CAAC;IAED,UAAU,GAAG,CAAC;QACZ,MAAM,CAAC,gBAAgB,CAAC,CAAQ,SAAE,IAAI,CAAC,aAAa;QACpD,MAAM,CAAC,gBAAgB,CAAC,CAAQ,SAAE,IAAI,CAAC,aAAa;IACtD,CAAC;IAED,YAAY,GAAG,CAAC;QACd,MAAM,CAAC,mBAAmB,CAAC,CAAQ,SAAE,IAAI,CAAC,aAAa;QACvD,MAAM,CAAC,mBAAmB,CAAC,CAAQ,SAAE,IAAI,CAAC,aAAa;IACzD,CAAC;IAED,QAAQ,GAAG,CAAC;QACV,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,OAAO;QAElC,oBAAoB,CAAC,IAAI,CAAC,GAAG;QAC7B,IAAI,CAAC,GAAG,GAAG,qBAAqB,CAAC,IAAI,CAAC,gBAAgB;IACxD,CAAC;IAED,YAAY,GAAG,CAAC;QACd,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;YACrE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY;YACnC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY;YACjC,MAAM;QACR,CAAC;QAED,IAAI,CAAC,YAAY,CAAC,yCAAI,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY;QAE5E,IAAI,CAAC,GAAG,GAAG,qBAAqB,CAAC,IAAI,CAAC,gBAAgB;IACxD,CAAC;IAED,YAAY,CAAC,MAAM,EAAE,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,MAAM;QACxB,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,MAAM;QAChC,IAAI,CAAC,QAAQ,CAAC,MAAM;IACtB,CAAC;IAED,QAAQ,GAAG,CAAC;QACV,IAAI,CAAC,UAAU;IACjB,CAAC;IAED,UAAU,GAAG,CAAC;QACZ,IAAI,CAAC,YAAY;QACjB,IAAI,CAAC,YAAY,GAAI,CAAiC,AAAjC,EAAiC,AAAjC,+BAAiC;IACxD,CAAC;IAED,YAAY,GAAG,CAAC;QACd,yCAAK,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YAClB,MAAM,KAAK,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;QAC1C,CAAC;IACH,CAAC;IAED,EAIG,AAJH;;;;GAIG,AAJH,EAIG,CACH,QAAQ,CAAC,MAAM,EAAE,CAAC;QAChB,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,eAAe,CAAC,SAAS,GAAG,MAAM;IACvE,CAAC;IAED,EAGG,AAHH;;;GAGG,AAHH,EAGG,CACH,OAAO,GAAG,CAAC;QACT,EAAE,EAAE,IAAI,CAAC,QAAQ,KAAK,IAAI,EAAE,MAAM;QAElC,IAAI,CAAC,YAAY;QACjB,IAAI,CAAC,YAAY;IACnB,CAAC;IAED,EAEG,AAFH;;GAEG,AAFH,EAEG,CACH,YAAY,GAAG,CAAC;QACd,KAAK,CAAC,CAAC,SAAC,MAAM,aAAE,QAAQ,EAAC,CAAC,GAAG,IAAI;QAEjC,yCAAK,CAAC,MAAM,EAAE,CAAC;YAAC,MAAM,EAAE,CAAE;QAAC,CAAC;QAE5B,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC;QACtB,yCAAI,CAAC,QAAQ,CAAC,QAAQ,GAAE,OAAO,GAAI,CAAC;YAClC,WAAW,CAAC,IAAI,CAAC,OAAO;QAC1B,CAAC;QACD,yCAAI,CAAC,WAAW,GAAE,OAAO,GAAI,CAAC;YAC5B,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,QAAQ;QACvC,CAAC;QACD,MAAM,CAAC,WAAW,CAAC,QAAQ;QAE3B,IAAI,CAAC,QAAQ,GAAG,IAAI;IACtB,CAAC","sources":["src/index.js","src/helpers.js"],"sourcesContent":["import { each, lerp, style } from './helpers';\n\n/**\n * AFScroll\n * @param {Object} options general options\n * @property {Number} smoothForce smoothing force in range 0.0 - 1.0, 0: no smooth, 1: no scroll\n * @property {Number} smoothLimit min diff between current and target value to keep smooth loop\n * @property {String} className css class name of scroll wrapper element\n * @property {Array} wrapExclude css selector to exclude from wrapping\n * @property {Function} onUpdate callback function triggered on scroll update\n * @property {Function} onComplete callback function triggered after smooth loop stopped\n */\nexport default class AFScroll {\n  constructor({\n    smoothForce = 0.8,\n    smoothLimit = 0.2,\n    className = 'afScroll',\n    wrapExclude = 'script, link',\n    onUpdate = () => {},\n    onComplete = () => {}\n  } = {}) {\n    this.smoothFactor = 1 - smoothForce;\n    this.smoothLimit = smoothLimit;\n    this.className = className;\n    this.wrapExclude = wrapExclude;\n    this.onUpdate = onUpdate;\n    this.onComplete = onComplete;\n\n    this.targetScroll = 0;\n    this.lastScroll = 0;\n\n    this.bodyEl = document.getElementsByTagName('body')[0];\n    this.scrollEl = null;\n\n    this.bindThis();\n    this.init();\n  }\n\n  /**\n   * initialize AFScroll\n   * @public\n   */\n  init() {\n    if (this.scrollEl !== null) return;\n\n    this.targetScroll = window.scrollY;\n    this.createScroll();\n    this.resizeBody();\n\n    this.scrollTo(this.targetScroll);\n    this.updateScroll(this.targetScroll);\n\n    this.bindEvents();\n  }\n\n  /**\n   * create scroll wrapper element\n   */\n  createScroll() {\n    const { bodyEl, className, wrapExclude } = this;\n\n    const scrollEl = document.createElement('div');\n    scrollEl.setAttribute('class', className);\n    style(scrollEl, {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n    });\n\n    const childrenArr = [];\n    each(bodyEl.children, childEl => {\n      if (childEl === scrollEl || childEl.matches(wrapExclude)) return true;\n      childrenArr.push(childEl);\n    });\n    each(childrenArr, childEl => {\n      scrollEl.appendChild(childEl);\n    });\n    bodyEl.insertBefore(scrollEl, bodyEl.children[0]);\n\n    this.scrollEl = scrollEl;\n  }\n\n  bindThis() {\n    this.onScrollEvent = this.onScroll.bind(this);\n    this.onResizeEvent = this.onResize.bind(this);\n    this.smoothUpdateTick = this.smoothUpdate.bind(this);\n  }\n\n  bindEvents() {\n    window.addEventListener('scroll', this.onScrollEvent);\n    window.addEventListener('resize', this.onResizeEvent);\n  }\n\n  unbindEvents() {\n    window.removeEventListener('scroll', this.onScrollEvent);\n    window.removeEventListener('resize', this.onResizeEvent);\n  }\n\n  onScroll() {\n    this.targetScroll = window.scrollY;\n\n    cancelAnimationFrame(this.raf);\n    this.raf = requestAnimationFrame(this.smoothUpdateTick);\n  }\n\n  smoothUpdate() {\n    if (Math.abs(this.targetScroll - this.lastScroll) < this.smoothLimit) {\n      this.updateScroll(this.targetScroll);\n      this.onComplete(this.targetScroll);\n      return;\n    }\n\n    this.updateScroll(lerp(this.lastScroll, this.targetScroll, this.smoothFactor));\n\n    this.raf = requestAnimationFrame(this.smoothUpdateTick);\n  }\n\n  updateScroll(scroll) {\n    this.lastScroll = scroll;\n    this.scrollEl.scrollTop = scroll;\n    this.onUpdate(scroll);\n  }\n\n  onResize() {\n    this.resizeBody();\n  }\n\n  resizeBody() {\n    this.singleResize();\n    this.singleResize(); // double to fix some size issues\n  }\n\n  singleResize() {\n    style(this.bodyEl, {\n      height: `${this.scrollEl.scrollHeight}px`,\n    });\n  }\n\n  /**\n   * scrollTo\n   * @public\n   * @param {Number} scroll scroll value\n   */\n  scrollTo(scroll) {\n    document.body.scrollTop = document.documentElement.scrollTop = scroll;\n  }\n\n  /**\n   * destroy AFScroll\n   * @public\n   */\n  destroy() {\n    if (this.scrollEl === null) return;\n\n    this.unbindEvents();\n    this.removeScroll();\n  }\n\n  /**\n   * remove scroll wrapper element\n   */\n  removeScroll() {\n    const { bodyEl, scrollEl } = this;\n\n    style(bodyEl, { height: '' });\n\n    const childrenArr = [];\n    each(scrollEl.children, childEl => {\n      childrenArr.push(childEl);\n    });\n    each(childrenArr, childEl => {\n      bodyEl.insertBefore(childEl, scrollEl);\n    });\n    bodyEl.removeChild(scrollEl);\n\n    this.scrollEl = null;\n  }\n}","/**\n * lerp\n * @param {Array} arr array or other iterable collection\n * @param {Function} cb callback function for each array element\n */\nexport const each = (arr, cb) => {\n  const l = arr.length;\n  for (let i = 0; i < l; i++) {\n    const result = cb(arr[i], i, arr);\n    if (result === true) continue;\n    if (result === false) break;\n  }\n};\n\n/**\n * lerp\n * @param {Number} begin begin value\n * @param {Number} end end value\n * @param {Number} factor in range 0.0 - 1.0\n * @returns interpolated value\n */\nexport const lerp = (begin, end, factor) => {\n  return begin + ((end - begin) * factor);\n};\n\n/**\n * style\n * @param {Element} el\n * @param {Object} styles\n */\nexport const style = (el, styles) => {\n  Object.keys(styles).forEach(styleKey => {\n    el.style[styleKey] = styles[styleKey];\n  });\n};\n\nexport default {\n  each,\n  lerp,\n  style,\n};"],"names":[],"version":3,"file":"module.js.map"}